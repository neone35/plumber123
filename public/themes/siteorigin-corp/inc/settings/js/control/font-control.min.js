!function(n,t){var e={};n.controlConstructor["siteorigin-font"]=n.Control.extend({ready:function(){var o=this,i=o.container.find("select.font"),a=o.container.find("select.font-variant"),s=o.container.find("select.font-subset"),r=!1;i.change(function(){var n=t(this).find("option:selected");a.empty().val(""),s.empty().val(""),void 0!==n.data("variants")?(a.append(t("<option></option>")).val(""),t.each(n.data("variants").split(","),function(n,e){a.append(t("<option></option>").html(e))}),a.val("regular"),a.find("option").length>2?a.parent().show():a.parent().hide()):a.parent().hide(),void 0!==n.data("subsets")?(s.append(t("<option></option>")),t.each(n.data("subsets").split(","),function(n,e){s.append(t("<option></option>").html(e))}),s.val("latin"),s.find("option").length>2?s.parent().show():s.parent().hide()):s.parent().hide()});var c=function(){if(r){var n={};n.font=i.val(),n.webfont=i.find("option:selected").data("webfont"),n.category=i.find("option:selected").data("category"),n.variant=a.val(),n.subset=s.val(),o.setting.set(JSON.stringify(n))}};if(o.container.find("select").change(c),""!==o.setting()){var l=JSON.parse(o.setting());i.val(l.font).change(),a.val(l.variant),s.val(l.subset)}else i.change();var d=null;n.section(o.section()).container.on("expanded",function(){if(null===d){var n=null;i.on("chosen:ready",function(o,i){var a=i.chosen.dropdown,s=a.find(".chosen-results");a.find(".chosen-results").on("scroll",function(){clearTimeout(n),n=setTimeout(function(){var n,o,i=[];if(s.find("li").each(function(){var a=t(this),r=a.position().top;void 0!==a.attr("style")&&a.attr("style").indexOf("__websafe")===-1&&r>-10&&r<s.outerHeight()+30&&(o=a.attr("style").match(/font-family: ([^,]+),.*;/),n=o[1].replace(/'/g,"").trim(),"undefined"==typeof e[n]&&(i.push(n),e[n]=!0))}),i.length>0){var a="//fonts.googleapis.com/css";a+="?family="+i.join("|").replace(" ","+"),a+="&text=0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",t("<link/>",{rel:"stylesheet",type:"text/css",href:a}).appendTo("head")}},500)}),setTimeout(function(){s.trigger("scroll")},500),i.chosen.search_field.on("keyup",function(){setTimeout(function(){s.trigger("scroll")},500)})}).on("chosen:showing_dropdown",function(n,t){t.chosen.dropdown.find(".chosen-results").trigger("scroll")}).chosen({allow_single_deselect:!0,search_contains:!0}),d=!0}r=!0})}})}(wp.customize,jQuery);