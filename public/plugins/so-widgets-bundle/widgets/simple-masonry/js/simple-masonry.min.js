var sowb=window.sowb||{};jQuery(function(t){sowb.setupSimpleMasonries=function(){var i=t(".sow-masonry-grid");if(!i.is(":visible")||i.data("initialized"))return i;var a=function(){i.each(function(){var i=t(this),a=i.data("layouts"),e=window.matchMedia("(max-width: "+a.tablet.breakPoint+"px)"),s=window.matchMedia("(max-width: "+a.mobile.breakPoint+"px)"),o=a.desktop;s.matches?o=a.mobile:e.matches&&(o=a.tablet);var n=o.numColumns;i.css("width","auto");var r=o.gutter*(n-1),h=Math.floor((i.width()-r)/n);i.width(h*n+r),i.imagesLoaded(function(){i.find("> .sow-masonry-grid-item").each(function(){var i=t(this),a=i.data("colSpan");a=Math.max(Math.min(a,o.numColumns),1),i.width(h*a+o.gutter*(a-1));var e=i.data("rowSpan");e=Math.max(Math.min(e,o.numColumns),1);var s=o.rowHeight||h;i.css("height",s*e+o.gutter*(e-1));var n=i.find("> img,> a > img"),r=n.attr("height")>0?n.attr("width")/n.attr("height"):1,d=i.height()>0?i.width()/i.height():1;if(r=parseFloat(r.toFixed(3)),d=parseFloat(d.toFixed(3)),r>d){n.css("width","auto"),n.css("height","100%"),n.css("margin-top","");var w=-.5*(n.width()-i.width());n.css("margin-left",w+"px")}else{n.css("height","auto"),n.css("width","100%"),n.css("margin-left","");var m=-.5*(n.height()-i.height());n.css("margin-top",m+"px")}}),i.packery({itemSelector:".sow-masonry-grid-item",columnWidth:h,gutter:o.gutter})})})};t(window).on("resize panelsStretchRows",a),setTimeout(function(){a()},100),i.data("initialized",!0)},sowb.setupSimpleMasonries(),t(sowb).on("setup_widgets",sowb.setupSimpleMasonries)}),window.sowb=sowb;