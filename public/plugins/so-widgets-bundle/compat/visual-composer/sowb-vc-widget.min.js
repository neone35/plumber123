var sowbForms=window.sowbForms||{};sowbForms.setupVcWidgetForm=function(){var e=jQuery,o=e('[name="so_widget_class"]'),i=e(".siteorigin_widget_form_container"),n=!1;i.on("change",".siteorigin-widget-field",function(){n=!0;var t=sowbForms.getWidgetFormValues(i),r=o.val(),a=JSON.stringify({widget_class:r,widget_data:t});a=a.replace(/\\/g,"\\\\"),e('[name="so_widget_data"]').val(a)});var t;o.mousedown(function(){t=o.find("option:selected")}),o.on("change",function(r){if(n&&!confirm(soWidgetsVC.confirmChangeWidget))return void t.attr("selected",!0);n=!1;var a=o.val(),s={action:"sowb_vc_widget_render_form",widget:a};e.post(soWidgetsVC.ajaxUrl,s,function(e){i.html(e),i.trigger("change")},"html")}),vc.atts.sowb_json_escaped={parse:function(e){var o=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]");return _.escape(_.escape(o.val().toString()).replace(/\[/g,"&#91;").replace(/\]/g,"&#93;"))},render:function(e,o){return _.unescape(_.unescape(o)).replace(/&#91;/g,"[").replace(/&#93;/g,"]")}},vc.events.on("shortcodeView:updated:siteorigin_widget_vc",function(){if(void 0!==vc.frame_window&&void 0!==vc.frame_window.sowb){(0,vc.frame_window.jQuery)(vc.frame_window.sowb).trigger("setup_widgets")}})},jQuery(function(e){sowbForms.setupVcWidgetForm()}),window.sowbForms=sowbForms;